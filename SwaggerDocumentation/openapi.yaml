openapi: 3.0.1
info:
  title: openEvent
  description: Plan your event. Be there when it happens.
  version: 1.0.0
servers:
  - url: http://localhost:8080
    description: Generated server url
tags:
  - name: Attendee Controller
    description: Handles attendee profile operations
  - name: Notification Controller
    description: Handles notification management operations
  - name: Ticket Controller
    description: Handles ticket booking, retrieval, and cancellation
  - name: Payment Controller
    description: Handles payment processing operations
  - name: Authentication Controller
    description: Handles user login and registration
  - name: Event Controller
    description: Handles event management operations
  - name: Feedback Controller
    description: Handles feedback submission and management
paths:
  /api/v1/notifications/{id}:
    get:
      tags:
        - Notification Controller
      summary: Get notification by ID
      description: Retrieve a notification by its unique ID.
      operationId: getNotificationById
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: OK
          content:
            '/':
              schema:
                $ref: '#/components/schemas/Notification'
    put:
      tags:
        - Notification Controller
      summary: Update notification
      description: Update an existing notification by its ID.
      operationId: updateNotification
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Notification'
        required: true
      responses:
        '200':
          description: OK
          content:
            '/':
              schema:
                $ref: '#/components/schemas/Notification'
    delete:
      tags:
        - Notification Controller
      summary: Delete notification
      description: Delete a notification by its unique ID.
      operationId: deleteNotification
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: OK
  /api/v1/feedback/{id}:
    get:
      tags:
        - Feedback Controller
      summary: Get feedback by ID
      description: Retrieve feedback by its unique ID.
      operationId: getFeedbackById
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Feedback retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Feedback'
        '404':
          description: Feedback not found
          content:
            '/':
              schema:
                type: object
    put:
      tags:
        - Feedback Controller
      summary: Update feedback
      description: Update feedback for an event by a user.
      operationId: updateFeedback
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        content:
          application/json:
            schema:
              type: object
              additionalProperties: {}
            example:
              comment: Updated comment
              rating: 4
        required: true
      responses:
        '200':
          description: Feedback updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Feedback'
        '400':
          description: Bad request
          content:
            '/':
              schema:
                type: object
        '404':
          description: Feedback not found
          content:
            '/':
              schema:
                type: object
    delete:
      tags:
        - Feedback Controller
      summary: Delete feedback
      description: Delete feedback by its unique ID.
      operationId: deleteFeedback
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Feedback deleted successfully
          content:
            '/':
              schema:
                type: object
        '404':
          description: Feedback not found
          content:
            '/':
              schema:
                type: object
  /api/v1/events/{id}:
    get:
      tags:
        - Event Controller
      summary: Get event by ID
      description: Retrieve an event by its unique ID.
      operationId: getEventById
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: OK
          content:
            '/':
              schema:
                type: object
    put:
      tags:
        - Event Controller
      summary: Update event
      description: Update an existing event by its ID.
      operationId: updateEvent
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Event'
        required: true
      responses:
        '200':
          description: OK
          content:
            '/':
              schema:
                type: object
    delete:
      tags:
        - Event Controller
      summary: Delete event
      description: Delete an event by its unique ID.
      operationId: deleteEvent
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: OK
          content:
            '/':
              schema:
                type: object
  /api/v1/attendees/{id}/profile:
    put:
      tags:
        - Attendee Controller
      summary: Update attendee profile
      description: Update the profile information of an attendee.
      operationId: updateAttendeeProfile
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        content:
          application/json:
            schema:
              type: object
              additionalProperties:
                type: string
            example:
              fullName: Updated Name
              email: newemail@example.com
        required: true
      responses:
        '200':
          description: OK
          content:
            '/':
              schema:
                type: object
  /api/v1/attendees/{id}/password:
    put:
      tags:
        - Attendee Controller
      summary: Change attendee password
      description: Change the password for an attendee.
      operationId: changeAttendeePassword
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        content:
          application/json:
            schema:
              type: object
              additionalProperties:
                type: string
            example:
              currentPassword: oldpassword
              newPassword: newpassword123
        required: true
      responses:
        '200':
          description: OK
          content:
            '/':
              schema:
                type: object
  /api/v1/tickets/book:
    post:
      tags:
        - Ticket Controller
      summary: Book ticket
      description: Book a new ticket for an event.
      operationId: bookTicket
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Ticket'
        required: true
      responses:
        '200':
          description: OK
          content:
            '/':
              schema:
                $ref: '#/components/schemas/Ticket'
  /api/v1/payments/refund/{paymentId}:
    post:
      tags:
        - Payment Controller
      summary: Initiate refund
      description: Initiate a refund for a payment by its ID.
      operationId: initiateRefund
      parameters:
        - name: paymentId
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Refund processed successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Payment'
        '400':
          description: Bad request
          content:
            '/':
              schema:
                type: object
  /api/v1/payments/initiate:
    post:
      tags:
        - Payment Controller
      summary: Initiate payment
      description: Initiate a payment for an event by a user.
      operationId: initiatePayment
      requestBody:
        content:
          application/json:
            schema:
              type: object
              additionalProperties: {}
            example:
              userId: 1
              eventId: 1
              amount: 100.5
              paymentMethod: CREDIT_CARD
        required: true
      responses:
        '200':
          description: Payment initiated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Payment'
        '400':
          description: Bad request
          content:
            '/':
              schema:
                type: object
  /api/v1/notifications:
    get:
      tags:
        - Notification Controller
      summary: Get all notifications
      description: Retrieve a list of all notifications.
      operationId: getAllNotifications
      responses:
        '200':
          description: OK
          content:
            '/':
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Notification'
    post:
      tags:
        - Notification Controller
      summary: Create notification
      description: Create a new notification.
      operationId: createNotification
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Notification'
        required: true
      responses:
        '200':
          description: OK
          content:
            '/':
              schema:
                $ref: '#/components/schemas/Notification'
  /api/v1/feedback:
    post:
      tags:
        - Feedback Controller
      summary: Submit feedback
      description: Submit feedback for an event by a user.
      operationId: submitFeedback
      requestBody:
        content:
          application/json:
            schema:
              type: object
              additionalProperties: {}
            example:
              userId: 1
              eventId: 1
              comment: Great event! Really enjoyed it.
              rating: 5
        required: true
      responses:
        '200':
          description: Feedback submitted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Feedback'
        '400':
          description: Bad request
          content:
            '/':
              schema:
                type: object
  /api/v1/events:
    get:
      tags:
        - Event Controller
      summary: Get all events
      description: Retrieve a list of all events.
      operationId: getAllEvents
      responses:
        '200':
          description: OK
          content:
            '/':
              schema:
                type: object
    post:
      tags:
        - Event Controller
      summary: Create event
      description: Create a new event.
      operationId: createEvent
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Event'
        required: true
      responses:
        '200':
          description: OK
          content:
            '/':
              schema:
                type: object
  /api/v1/bookings:
    post:
      tags:
        - booking-controller
      summary: Book ticket
      description: Book a ticket for an event using the booking saga pattern. Returns booking result with status and details.
      operationId: bookTicket_1
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BookingRequest'
        required: true
      responses:
        '200':
          description: OK
          content:
            '/':
              schema:
                $ref: '#/components/schemas/BookingResult'
  /api/auth/signup:
    post:
      tags:
        - Authentication Controller
      summary: User Registration
      description: Registers a new user and returns user details.
      operationId: register
      requestBody:
        content:
          application/json:
            schema:
              type: object
              additionalProperties:
                type: string
            example:
              username: john_doe
              email: john@example.com
              password: password123
              fullName: John Doe
              role: ATTENDEE
        required: true
      responses:
        '200':
          description: OK
          content:
            '/':
              schema:
                type: object
  /api/auth/login:
    post:
      tags:
        - Authentication Controller
      summary: User Login
      description: Authenticates user and returns a JWT token with user details.
      operationId: login
      requestBody:
        content:
          application/json:
            schema:
              type: object
              additionalProperties:
                type: string
            example:
              username: testuser
              password: testpassword
        required: true
      responses:
        '200':
          description: OK
          content:
            '/':
              schema:
                type: object
  /api/v1/payments/{paymentId}/status:
    patch:
      tags:
        - Payment Controller
      summary: Update payment status
      description: Update the status of a payment by its ID.
      operationId: updatePaymentStatus
      parameters:
        - name: paymentId
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        content:
          application/json:
            schema:
              type: object
              additionalProperties:
                type: string
            example:
              status: SUCCESS
              failureReason: Optional failure reason if status is FAILED
        required: true
      responses:
        '200':
          description: Payment status updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Payment'
        '400':
          description: Invalid payment status
          content:
            '/':
              schema:
                type: object
        '500':
          description: Internal server error
          content:
            '/':
              schema:
                type: object
  /api/v1/tickets/{ticketId}:
    get:
      tags:
        - Ticket Controller
      summary: Get ticket by ID
      description: Retrieve a ticket by its unique ID.
      operationId: getTicketById
      parameters:
        - name: ticketId
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: OK
          content:
            '/':
              schema:
                $ref: '#/components/schemas/Ticket'
    delete:
      tags:
        - Ticket Controller
      summary: Cancel ticket
      description: Cancel a ticket by its unique ID.
      operationId: cancelTicket
      parameters:
        - name: ticketId
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: OK
          content:
            '/':
              schema:
                type: string
  /api/v1/tickets/user/{userId}:
    get:
      tags:
        - Ticket Controller
      summary: Get tickets by user
      description: Retrieve all tickets booked by a specific user.
      operationId: getTicketsByUser
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: OK
          content:
            '/':
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Ticket'
  /api/v1/tickets/events/{eventId}:
    get:
      tags:
        - Ticket Controller
      summary: Get tickets by event
      description: Retrieve all tickets for a specific event.
      operationId: getTicketsByEvent
      parameters:
        - name: eventId
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: OK
          content:
            '/':
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Ticket'
  /api/v1/payments/{paymentId}:
    get:
      tags:
        - Payment Controller
      summary: Get payment by ID
      description: Retrieve payment details by payment ID.
      operationId: getPaymentById
      parameters:
        - name: paymentId
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Payment retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Payment'
        '404':
          description: Payment not found
          content:
            '/':
              schema:
                type: object
  /api/v1/payments/status/{paymentId}:
    get:
      tags:
        - Payment Controller
      summary: Check payment status
      description: Check the status of a payment by its ID.
      operationId: checkPaymentStatus
      parameters:
        - name: paymentId
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: OK
          content:
            '/':
              schema:
                type: object
  /api/v1/events/fail:
    get:
      tags:
        - Event Controller
      summary: Get all events (fail)
      description: Simulate a failure when retrieving all events.
      operationId: getAllEventsFail
      responses:
        '200':
          description: OK
          content:
            '/':
              schema:
                type: object
  /api/v1/attendees:
    get:
      tags:
        - Attendee Controller
      summary: Get all attendees
      description: Retrieve a list of all attendees.
      operationId: getAllAttendees
      responses:
        '200':
          description: Attendees retrieved successfully
          content:
            '/':
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Attendee'
  /api/v1/attendees/{id}:
    get:
      tags:
        - Attendee Controller
      summary: Get attendee by ID
      description: Retrieve an attendee by their unique ID.
      operationId: getAttendeeById
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Attendee retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Attendee'
        '404':
          description: Attendee not found
          content:
            '/':
              schema:
                type: object
    delete:
      tags:
        - Attendee Controller
      summary: Delete attendee
      description: Delete an attendee by their unique ID.
      operationId: deleteAttendee
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: OK
          content:
            '/':
              schema:
                type: object
  /api/v1/attendees/username/{username}:
    get:
      tags:
        - Attendee Controller
      summary: Get attendee by username
      description: Retrieve an attendee by their username.
      operationId: getAttendeeByUsername
      parameters:
        - name: username
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            '/':
              schema:
                type: object
components:
  schemas:
    Notification:
      type: object
      properties:
        id:
          type: integer
          format: int64
        title:
          type: string
        message:
          type: string
        recipient:
          type: string
        sentAt:
          type: string
          format: date-time
    Feedback:
      type: object
      properties:
        id:
          type: integer
          format: int64
        userId:
          type: integer
          format: int64
        eventId:
          type: integer
          format: int64
        comment:
          type: string
        rating:
          type: integer
          format: int32
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    Event:
      type: object
      properties:
        id:
          type: integer
          format: int64
        title:
          type: string
        description:
          type: string
        location:
          type: string
        eventDate:
          type: string
          format: date-time
    Ticket:
      type: object
      properties:
        id:
          type: integer
          format: int64
        userId:
          type: integer
          format: int64
        eventId:
          type: integer
          format: int64
        seatNumber:
          type: string
        price:
          type: number
          format: double
        status:
          type: string
    Payment:
      type: object
      properties:
        id:
          type: integer
          format: int64
        userId:
          type: integer
          format: int64
        eventId:
          type: integer
          format: int64
        amount:
          type: number
        paymentMethod:
          type: string
        status:
          type: string
          enum:
            - PENDING
            - SUCCESS
            - FAILED
            - REFUNDED
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        transactionId:
          type: string
        failureReason:
          type: string
    BookingRequest:
      type: object
      properties:
        userId:
          type: integer
          format: int64
        eventId:
          type: integer
          format: int64
        seatNumber:
          type: string
        price:
          type: number
          format: double
        paymentMethod:
          type: string
    BookingResult:
      type: object
      properties:
        success:
          type: boolean
        ticketId:
          type: integer
          format: int64
        paymentId:
          type: integer
          format: int64
        message:
          type: string
    Attendee:
      type: object
      properties:
        id:
          type: integer
          format: int64
        fullName:
          type: string
        username:
          type: string
        email:
          type: string
        password:
          type: string
        role:
          type: string
          enum:
            - ADMIN
            - ORGANIZER
            - ATTENDEE
        verified:
          type: boolean
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time